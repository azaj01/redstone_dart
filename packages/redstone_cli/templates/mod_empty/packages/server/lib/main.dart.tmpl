// Server entry point for {{project_name_title}}
//
// This file handles ALL game logic:
// - Block/Item/Entity registrations
// - Commands
// - Recipes
// - Loot tables
// - Event handlers
// - Custom AI goals
//
// It runs on the Server thread using the pure Dart VM.

import 'package:dart_mod_server/dart_mod_server.dart';
import 'package:minecraft_mcp/runtime.dart';

/// Server-side entry point for the mod.
///
/// Bridge.run() handles all the initialization boilerplate:
/// - Bridge.initialize()
/// - Events.registerProxyBlockHandlers()
/// - Events.registerProxyItemHandlers()
/// - Events.registerCustomGoalHandlers()
/// - Bridge.onRegistryReady(callback)
void main() {
  print('{{project_name_title}} server mod initialized!');

  Bridge.run(() {
    // =========================================================================
    // Register your custom items here
    // Items must be registered BEFORE blocks that reference them as drops
    // =========================================================================
    // ItemRegistry.register(MyItem());
    // ItemRegistry.freeze();

    // =========================================================================
    // Register your custom blocks here
    // =========================================================================
    // BlockRegistry.register(MyBlock());
    // BlockRegistry.freeze();

    // =========================================================================
    // Register your custom entities here
    // =========================================================================
    // EntityRegistry.register(MyEntity());
    // EntityRegistry.freeze();

    // =========================================================================
    // Register commands
    // =========================================================================
    // Commands.register('mycommand', execute: (ctx) { ... });

    // =========================================================================
    // Register event handlers
    // =========================================================================
    // Events.onPlayerJoin((player) { ... });

    // =========================================================================
    // Register recipes
    // =========================================================================
    // Recipes.shaped('mymod:myblock', pattern: [...], keys: {...}, result: '...');

    // =========================================================================
    // Register loot table modifications
    // =========================================================================
    // LootTables.modify('minecraft:entities/zombie', (builder) { ... });

    print('{{project_name_title}} server mod ready!');
    print('  Blocks: ${BlockRegistry.blockCount} registered');
    print('  Items: ${ItemRegistry.itemCount} registered');

    // Initialize MCP runtime for AI-controlled testing (if enabled)
    initializeMcpRuntime();
  });
}
